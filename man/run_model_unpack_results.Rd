% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_model_unpack_results.R
\name{run_model_unpack_results}
\alias{run_model_unpack_results}
\title{Run and Unpack Dust Model Simulation Results}
\usage{
run_model_unpack_results(params, simulation_length, no_runs = 10)
}
\arguments{
\item{params}{A named list of model parameters, which must include:
\itemize{
  \item \code{n_age}: Integer. Number of age groups.
  \item \code{n_vacc}: Integer. Number of vaccination strata.
  \item \code{n_risk}: Integer. Number of risk groups.
  \item \code{tt_migration}: Integer. Number of timepoints with migration changes (used for unpacking migration dimension).
  \item Other model-specific parameters required by `transmission_model()`.
}}

\item{simulation_length}{Integer. Total length of the simulation in model timesteps. Defines the number of steps run.}

\item{no_runs}{Integer. Number of stochastic particles to simulate (default = 10). Higher values yield more stable outputs.}
}
\value{
A `data.table` in long format with the following columns:
  \itemize{
    \item \code{state}: The name of the state variable (e.g., "S", "E", "I", etc.).
    \item \code{time}: Model time step (starting at 0).
    \item \code{age}, \code{vaccination}, \code{risk}: Stratification dimensions.
    \item \code{value}: Simulated value for the given state and strata.
    \item (Optional) \code{particle}: Particle identifier, if applicable.
  }
}
\description{
Initializes a Dust model simulation using an `odin.dust` model (compiled with `transmission_model()`),
runs the simulation using specified parameters and particle count, and returns the unpacked results
as a long-format `data.table` suitable for downstream analysis.
}
\details{
Internally uses:
\itemize{
  \item `dust2::dust_system_create()` to build the Dust model system.
  \item `dust2::dust_system_simulate()` to run the stochastic simulation.
  \item `unpack_dust2()` to reshape model outputs into long-format `data.table`.
}

The `dimension_names` list passed to `unpack_dust2()` includes:
\itemize{
  \item Age groups: 1 to `n_age`
  \item Vaccination strata: 1 to `n_vacc`
  \item Risk strata: 1 to `n_risk`
  \item Time: from 0 to `simulation_length`
  \item no_migration_changes: derived as `tt_migration + 1`
}

State dimensions unpacked include: `"S"`, `"E"`, `"I"`, `"R"`, `"Is"`, `"Rc"`, `"new_case"`, `"Reff_age"`, and `"seropositive"`.
}
\examples{
\dontrun{
params <- list(n_age = 17, n_vacc = 3, n_risk = 2, tt_migration = 5, ...)
sim_results <- run_model_unpack_results(params, simulation_length = 365)
}

}
