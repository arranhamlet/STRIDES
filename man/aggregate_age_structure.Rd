% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregate_age_structure.R
\name{aggregate_age_structure}
\alias{aggregate_age_structure}
\title{Aggregate Age Structure of a Model Output Object}
\usage{
aggregate_age_structure(
  obj,
  age_breaks,
  method = c("sum", "mean", "weighted.mean", "rate"),
  weights = NULL,
  time_var = "dim4",
  tol = 1e-06
)
}
\arguments{
\item{obj}{A data frame with at least the columns dim1 and value. If using time-varying weights, must also include a time column (default: dim4).}

\item{age_breaks}{A numeric vector of breakpoints defining age bands (e.g. c(0, 1, 5, ..., Inf)).}

\item{method}{One of "sum", "mean", "weighted.mean", or "rate". "rate" returns population-weighted rate while preserving total events.}

\item{weights}{A numeric vector or data frame of population weights, required for "rate" and "weighted.mean".}

\item{time_var}{The name of the time column. Default is "dim4".}

\item{tol}{Numerical tolerance for preservation check. Default is 1e-6.}
}
\value{
A data frame with aggregated dim1 values. If method = "rate", a plot is attached as an attribute.
}
\description{
Aggregates a long-format data frame with an age dimension (dim1) into custom age groups.
Supports sum, mean, weighted.mean, and rate-based aggregation with optional plotting check.
}
\keyword{internal}
